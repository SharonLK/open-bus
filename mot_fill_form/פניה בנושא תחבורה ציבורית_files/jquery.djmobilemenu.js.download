/**
 * @version $Id: jquery.djmobilemenu.js 51 2016-03-02 13:54:54Z szymon $
 * @package DJ-MegaMenu
 * @copyright Copyright (C) 2013 DJ-Extensions.com, All rights reserved.
 * @license DJ-Extensions.com Proprietary Use License
 * @author url: http://dj-extensions.com
 * @author email contact@dj-extensions.com
 * @developer Szymon Woronowski - szymon.woronowski@design-joomla.eu
 */
(function($){var l=function(c,d){var f=$('<select id="'+c.attr('id')+'select" class="inputbox dj-select" />').on('change',function(){if($(this).val)window.location=$(this).val()});var g=c.find('li.dj-up');m(g,f,0);f.appendTo(d);d.find('.dj-mobile-open-btn').on('click',function(e){e.stopPropagation();e.preventDefault();var a=f[0];if(document.createEvent){var b=document.createEvent("MouseEvents");b.initMouseEvent("mousedown",true,true,window,0,0,0,0,0,false,false,false,false,0,null);a.dispatchEvent(b)}else if(a.fireEvent){a.fireEvent("onmousedown")}})};var m=function(g,h,j){var k='',active=false;for(var i=0;i<j;i++){k+='- '}g.each(function(){var a=$(this);var b=a.find('> a').first();var c=a.find('> .dj-subwrap > .dj-subwrap-in > .dj-subcol > .dj-submenu > li, > .dj-subtree > li');if(b.length){var d='';var e=b.find('img').first();if(e.length){d=k+e.attr('alt')}else{d=b.html().replace(/(<small[^<]+<\/small>)/ig,"");d=k+d.replace(/(<([^>]+)>)/ig,"")}var f=$('<option value="'+b.prop('href')+'">'+d+'</option>').appendTo(h);if(!b.prop('href')){f.prop('disabled',true)}if(a.hasClass('active')){h.val(f.val());active=true}}if(c)m(c,h,j+1)});if(!j&&!active){$('<option value="">- MENU -</option>').prependTo(h);h.val('')}};var n=function(d){d.find('ul.dj-mobile-nav > li, ul.dj-mobile-nav-child > li').each(function(){var a=$(this);var b=a.find('> a').first();if(b.length){var c=a.find('> ul.dj-mobile-nav-child > li:not(:empty)');if(!c.length){a.removeClass('parent');a.find('ul.dj-mobile-nav-child').remove()}if(a.hasClass('parent')){b.append('<span class="toggler"></span>');b.on('click',function(e){if(!a.hasClass('active'))e.preventDefault();else if($(e.target).hasClass('toggler')){e.preventDefault();e.stopPropagation();a.removeClass('active')}})}b.on('focus',function(){setTimeout(function(){b.parents('.dj-mobileitem').click()},50)})}a.on('click',function(){a.siblings().removeClass('active');a.addClass('active')})})};var o=function(b){var c=$(document.body).children();var d=$('<div class="dj-offcanvas-wrapper" />');var f=$('<div class="dj-offcanvas-pusher" />');var g=$('<div class="dj-offcanvas-pusher-in" />');var h=b.find('.dj-offcanvas').first();$(document.body).addClass('dj-offcanvas-effect-'+h.data('effect'));var i=null;b.find('.dj-mobile-open-btn').on('click',function(e){e.stopPropagation();e.preventDefault();clearTimeout(i);f.addClass('overlay');h.data('scroll',$(window).scrollTop());$(document.body).addClass('dj-offcanvas-open');g.css('margin-top',-h.data('scroll'));h.find('.dj-offcanvas-close-btn').focus()});$(document.body).prepend(d);d.append(h);d.append(f);f.append(g);g.append(c);h.find('.dj-offcanvas-close-btn').on('click',function(e){e.stopPropagation();e.preventDefault();if($(document.body).hasClass('dj-offcanvas-open')){g.css('margin-top',0);$(document.body).removeClass('dj-offcanvas-open');$(window).scrollTop(h.data('scroll'));b.find('.dj-mobile-open-btn').focus();i=setTimeout(function(){f.removeClass('overlay')},1000)}});$('.dj-offcanvas-pusher').on('click',function(){h.find('.dj-offcanvas-close-btn').click()});h.find('.dj-offcanvas-close-btn').on('keydown',function(a){if(a.which==9){setTimeout(function(){if(!h.find(':focus').length){h.find('.dj-offcanvas-close-btn').click()}},50)}});h.find('.dj-offcanvas-end').on('focus',function(){h.find('.dj-offcanvas-close-btn').click()});n(h)};var p=function(a){a.find('.dj-mobile-open-btn').on('click',function(e){e.stopPropagation();e.preventDefault();a.find('.dj-accordion-in').slideToggle('fast')});n(a)};var q=null;$(window).resize(function(){window.clearTimeout(q);q=window.setTimeout(function(){var c=$('body').css('overflow');if(c=='visible')c='';$('body').css('overflow','hidden');var d=$(window).innerWidth();$('body').css('overflow',c);var e=false;$('.dj-megamenu').each(function(){var a=$(this);var b=$('#'+a.prop('id')+'mobile');if(b.length){if(d<=a.data('trigger')){e=true;$(document.body).addClass(a.prop('id')+'-mobile')}else{$(document.body).removeClass(a.prop('id')+'-mobile')}}});if(e){$(document.body).addClass('dj-megamenu-mobile')}else{$(document.body).removeClass('dj-megamenu-mobile')}},100)});$(document).ready(function(){$('.dj-megamenu').each(function(){var a=$(this);var b=$('#'+a.prop('id')+'mobile');var c=$('#'+a.prop('id')+'mobileWrap');if(c.length){c.append(b)}if(b.length){b.find('.dj-hideitem').remove();if(b.hasClass('dj-megamenu-offcanvas')){o(b)}else if(b.hasClass('dj-megamenu-accordion')){p(b)}}});$(window).trigger('resize')});$(window).one('load',function(){$('.dj-megamenu').each(function(){var a=$(this);var b=$('#'+a.prop('id')+'mobile');if(b.length){if(b.hasClass('dj-megamenu-select')){l(a,b)}}});$('.dj-offcanvas-close-btn').click()})})(jQuery);